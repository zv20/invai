# InvAI Environment Configuration
# Copy this file to .env and update with your values

# ===================================
# SERVER CONFIGURATION
# ===================================
PORT=3001
NODE_ENV=development

# ===================================
# SECURITY - CRITICAL
# ===================================

# JWT Secret (CRITICAL - MUST BE 64+ CHARACTERS)
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-64-plus-character-secret-key-here-must-be-changed-in-production-use-generator-command

# JWT Token Expiration (PATCH 3: Reduced from 24h to 2h)
JWT_EXPIRATION=2h

# Session Encryption Key (32 bytes = 64 hex characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=your-64-character-hex-encryption-key-for-session-data-here-use-generator

# CORS Allowed Origins (comma-separated, no spaces)
# PATCH 4: Restrictive CORS configuration
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Production example:
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://app.yourdomain.com

# ===================================
# DATABASE CONFIGURATION
# ===================================

# Database Type: 'sqlite' or 'postgresql'
DATABASE_TYPE=sqlite

# SQLite Configuration
DATABASE_FILENAME=data/inventory.db

# PostgreSQL Configuration (if using PostgreSQL)
# Uncomment and configure if DATABASE_TYPE=postgresql
# DATABASE_URL=postgresql://username:password@localhost:5432/invai
# or individual settings:
# PGHOST=localhost
# PGPORT=5432
# PGUSER=invai_user
# PGPASSWORD=your_secure_password_here
# PGDATABASE=invai

# ===================================
# PWA & MOBILE CONFIGURATION
# ===================================

PWA_ENABLED=true
PUSH_NOTIFICATIONS_ENABLED=false

# Push Notification Keys (if enabled)
# Generate VAPID keys with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:your-email@example.com

# ===================================
# EMAIL CONFIGURATION (Optional)
# ===================================

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM=InvAI <noreply@yourdomain.com>

# ===================================
# BACKUP CONFIGURATION
# ===================================

BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
MAX_BACKUPS=10

# ===================================
# LOGGING CONFIGURATION
# ===================================

LOG_LEVEL=info
LOG_DIR=logs

# ===================================
# RATE LIMITING (PATCH 8)
# ===================================

# Auth endpoints: 5 requests per 15 minutes
RATE_LIMIT_AUTH_WINDOW=900000
RATE_LIMIT_AUTH_MAX=5

# API endpoints: 100 requests per 15 minutes
RATE_LIMIT_API_WINDOW=900000
RATE_LIMIT_API_MAX=100

# Sensitive operations: 5 requests per minute
RATE_LIMIT_STRICT_WINDOW=60000
RATE_LIMIT_STRICT_MAX=5

# ===================================
# PASSWORD POLICY (PATCH 11)
# ===================================

PASSWORD_MIN_LENGTH=12
PASSWORD_EXPIRATION_DAYS=90
PASSWORD_HISTORY_COUNT=5
ACCOUNT_LOCKOUT_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION=900  # 15 minutes in seconds

# ===================================
# SESSION CONFIGURATION
# ===================================

SESSION_TIMEOUT=7200  # 2 hours in seconds (matches JWT_EXPIRATION)
SESSION_CLEANUP_INTERVAL=3600  # 1 hour

# ===================================
# SECURITY HEADERS (PATCH 7)
# ===================================

HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ===================================
# FILE UPLOAD LIMITS (PATCH 5)
# ===================================

MAX_JSON_SIZE=1mb
MAX_CSV_SIZE=5mb
MAX_FILE_UPLOAD_SIZE=10mb

# ===================================
# DEVELOPMENT/TESTING
# ===================================

# Set to 'true' to enable detailed error messages (dev only)
DETAILED_ERRORS=false

# Set to 'true' to enable API request logging
API_REQUEST_LOGGING=true

# ===================================
# SECURITY CHECKLIST
# ===================================
# ✅ JWT_SECRET is 64+ characters
# ✅ ENCRYPTION_KEY is 64 hex characters (32 bytes)
# ✅ ALLOWED_ORIGINS configured for production
# ✅ Strong database password (if PostgreSQL)
# ✅ SMTP credentials secured
# ✅ All default passwords changed
# ✅ NODE_ENV=production for deployment
# ✅ HTTPS enabled in production
# ✅ Firewall configured
# ✅ Regular backups enabled
# ✅ Monitoring configured
